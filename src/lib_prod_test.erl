%%%-------------------------------------------------------------------
%%% @author c50 <joq62@c50>
%%% @copyright (C) 2024, c50
%%% @doc
%%% 
%%% @end
%%% Created : 11 Jan 2024 by c50 <joq62@c50>
%%%-------------------------------------------------------------------
-module(lib_prod_test).
  

-include("prod_test.hrl").
  
%% API
-export([
	 all_nodes/0	 
	]).

-export([

	]).

%%%===================================================================
%%% API
%%%===================================================================
%%--------------------------------------------------------------------
%% @doc
%% 
%% @end
%%--------------------------------------------------------------------
all_nodes()->
    all_nodes(?MainNodes,[]).

all_nodes([],Acc)->
    lists:usort(Acc);
all_nodes([Node|T],Acc)->
    NewAcc=case rpc:call(Node,erlang,nodes,[],5000) of
	       {badrpc,timeout}->
		   Acc;
	       {badrpc,nodedown}->
		   Acc;
	       Nodes ->
		   lists:append(Nodes,Acc)
	   end,
    all_nodes(T,NewAcc).

%%%===================================================================
%%% Internal functions
%%%===================================================================
